<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loucas Rongeart</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            margin-bottom: calc(33%); /* Ensures footer does not overlap with content */
            background-color: black; /* Replace background below the menu with black */
        }
    </style>
</head>
<body>
    <!-- Header and Navigation Menu -->
    <header style="background-color: rgb(15, 15, 15); color: white; padding: 1rem; display: flex; justify-content: space-between; align-items: center;">
        <div style="text-align: left;">
            <h1 style="margin: 0;">Loucas RONGEART</h1>
            <h3 style="margin: 0; color: rgb(139, 139, 139);">Creature & Character Artist</h3>
        </div>
        <nav>
            <ul style="list-style: none; display: flex; margin: 0; padding: 0; font-size: 0.75rem;">
                <li style="margin: 0 1rem;"><a href="index.html" style="color: white; text-decoration: none; text-transform: uppercase;">Home</a></li>
                <li style="margin: 0 1rem;"><a href="https://vimeo.com/895353165" target="_blank" style="color: white; text-decoration: none; text-transform: uppercase;">Showreel</a></li>
                <li style="margin: 0 1rem;"><a href="tutorial.html" style="color: white; text-decoration: none; text-transform: uppercase;">Tutorial & Scripting</a></li>
                <li style="margin: 0 1rem;"><a href="about.html" style="color: white; text-decoration: none; text-transform: uppercase;">About</a></li>
                <li style="margin: 0 1rem;"><a href="cv.html" style="color: white; text-decoration: none; text-transform: uppercase;">CV</a></li>
                <li style="margin: 0 1rem;"><a href="contact.html" style="color: white; text-decoration: none; text-transform: uppercase;">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Showreel Section -->
    <section id="showreel" style="
        background-color: black; 
        padding: 2rem; 
        text-align: center; 
        border-bottom: 1px solid rgb(40, 40, 40);
        display: block !important;
    ">
        <div style="max-width: 800px; margin: 0 auto;">
            <a href="https://vimeo.com/895353165" target="_blank" style="
                display: inline-block;
                background: linear-gradient(135deg, rgb(40, 40, 40), rgb(25, 25, 25));
                color: white;
                text-decoration: none;
                padding: 1.2rem 3rem;
                border: 2px solid rgb(60, 60, 60);
                border-radius: 0px;
                font-size: 1.3rem;
                font-weight: 500;
                text-transform: uppercase;
                letter-spacing: 2px;
                transition: all 0.3s ease;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                position: relative;
                overflow: hidden;
            " onmouseover="
                this.style.transform = 'translateY(-3px)';
                this.style.boxShadow = '0 8px 30px rgba(0, 0, 0, 0.7)';
                this.style.borderColor = 'rgb(100, 100, 100)';
            " onmouseout="
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.5)';
                this.style.borderColor = 'rgb(60, 60, 60)';
            ">
                <span style="position: relative; z-index: 2;">â–¶ Watch Showreel</span>
            </a>
        </div>
    </section>

    <!-- Portfolio Gallery Section -->
    <section id="portfolio-gallery" style="background-color: black; padding: 5px; min-height: 60vh; display: block !important;">
        <div id="gallery-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 2px; padding: 0;">
            <!-- Dynamic portfolio content will be populated here -->
            <div style="color: gray; text-align: center; padding: 2rem; grid-column: 1 / -1;">Loading portfolio...</div>
        </div>
    </section>

    <!-- Include Footer -->
    <div id="footer-placeholder"></div>
    <script>
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            });
    </script>

    <script>
        function showSection(sectionId) {
            document.querySelectorAll('section').forEach(section => {
                // Portfolio gallery and showreel are always visible, others are controlled by hash
                if (section.id === 'portfolio-gallery' || section.id === 'showreel') {
                    return; // Don't hide the portfolio gallery or showreel
                }
                
                // Show the requested section or hide all others
                section.style.display = section.id === sectionId ? 'block' : 'none';
            });
        }

        function handleHashChange() {
            const sectionId = window.location.hash.replace('#', '');
            showSection(sectionId);
        }

        window.addEventListener('hashchange', handleHashChange);

        // Initial load
        handleHashChange();
    </script>

    <script>
        // Immediate debugging
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, checking gallery elements...');
            const galleryGrid = document.getElementById('gallery-grid');
            console.log('Gallery grid found:', galleryGrid);
            if (galleryGrid) {
                console.log('Gallery grid innerHTML:', galleryGrid.innerHTML);
            }
        });
        
        console.log('Starting to load content.json...');
        fetch(`content.json?v=${Date.now()}`)
            .then(response => {
                console.log('Response status:', response.status);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('Loaded data:', data);
                const galleryGrid = document.getElementById('gallery-grid');
                
                if (!galleryGrid) {
                    console.error('Could not find gallery grid element');
                    return;
                }
                
                galleryGrid.innerHTML = ''; // Clear existing items
                console.log('Processing', data.items.length, 'items');

                data.items.forEach((item, index) => {
                    console.log(`Processing item ${index}:`, item);
                    
                    // Create gallery card
                    const card = document.createElement('div');
                    card.style.cssText = `
                        background-color: rgb(25, 25, 25);
                        border-radius: 0px;
                        overflow: hidden;
                        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                        cursor: pointer;
                    `;
                    
                    // Add hover effects for overlay only (no card animation)
                    card.addEventListener('mouseenter', () => {
                        const overlay = card.querySelector('.hover-overlay');
                        if (overlay) overlay.style.opacity = '1';
                    });
                    
                    card.addEventListener('mouseleave', () => {
                        const overlay = card.querySelector('.hover-overlay');
                        if (overlay) overlay.style.opacity = '0';
                    });
                    
                    // Add click functionality to navigate to project page
                    card.addEventListener('click', () => {
                        window.location.href = `project/${item.id}/`;
                    });
                    
                    const imgSrc = `./img/${item.image}`;
                    console.log(`Creating image with src: ${imgSrc}`);
                    
                    card.innerHTML = `
                        <div style="position: relative; aspect-ratio: 16/9; overflow: hidden;">
                            <img src="${imgSrc}" alt="${item.text}" 
                                 style="width: 100%; height: 100%; object-fit: cover;"
                                 onerror="console.error('Image failed to load:', this.src); this.style.background='rgb(60,60,60)'; this.alt='[IMG]';"
                                 onload="console.log('Image loaded successfully:', this.src)">>
                            <div class="hover-overlay" style="
                                position: absolute; 
                                top: 0; left: 0; right: 0; bottom: 0; 
                                background-color: rgba(0,0,0,0.6); 
                                display: flex; 
                                align-items: center; 
                                justify-content: center;
                                opacity: 0;
                                transition: opacity 0.3s ease;
                                pointer-events: none;
                            ">
                                <h3 style="
                                    color: white; 
                                    margin: 0; 
                                    font-size: 1.4rem; 
                                    line-height: 1.4; 
                                    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
                                    text-transform: uppercase;
                                    text-align: center;
                                    padding: 1rem;
                                ">${item.text}</h3>
                            </div>
                        </div>
                    `;
                    
                    galleryGrid.appendChild(card);
                });
                console.log('Finished adding all items to gallery');
            })
            .catch(error => {
                console.error('Error loading content:', error);
                // Add a visible error message for debugging
                const galleryGrid = document.getElementById('gallery-grid');
                if (galleryGrid) {
                    galleryGrid.innerHTML = '<div style="color: red; padding: 2rem; text-align: center; grid-column: 1 / -1;">Error loading portfolio: ' + error.message + '</div>';
                }
            });
    </script>

    <!-- Fallback content script -->
    <script>
        // Fallback: Add some test content immediately to verify the container works
        setTimeout(() => {
            const galleryGrid = document.getElementById('gallery-grid');
            
            // If JSON loading failed, add fallback content
            if (galleryGrid && galleryGrid.innerHTML.includes('Loading portfolio...')) {
                console.log('JSON loading seems to have failed, adding fallback content');
                const fallbackItems = [
                    { id: "deviljho-concept", text: "Test Portfolio Item 1 - Fallback", image: "deviljho_bg.jpg" },
                    { id: "fantasy-warrior", text: "Test Portfolio Item 2 - Fallback", image: "deviljho_bg.jpg" },
                    { id: "dragon-anatomy", text: "Test Portfolio Item 3 - Fallback", image: "deviljho_bg.jpg" }
                ];
                
                galleryGrid.innerHTML = ''; // Clear loading message
                
                fallbackItems.forEach((item, index) => {
                    const card = document.createElement('div');
                    card.style.cssText = `
                        background-color: rgb(25, 25, 25);
                        border-radius: 0px;
                        overflow: hidden;
                        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                        cursor: pointer;
                    `;
                    
                    const imgSrc = `./img/${item.image}`;
                    card.innerHTML = `
                        <div style="position: relative; aspect-ratio: 16/9; overflow: hidden;">
                            <img src="${imgSrc}" alt="${item.text}" 
                                 style="width: 100%; height: 100%; object-fit: cover;"
                                 onerror="console.error('Fallback image failed:', this.src); this.style.background='rgb(60,60,60)'; this.alt='[IMG]';">
                            <div class="hover-overlay" style="
                                position: absolute; 
                                top: 0; left: 0; right: 0; bottom: 0; 
                                background-color: rgba(0,0,0,0.6); 
                                display: flex; 
                                align-items: center; 
                                justify-content: center;
                                opacity: 0;
                                transition: opacity 0.3s ease;
                                pointer-events: none;
                            ">
                                <h3 style="
                                    color: white; 
                                    margin: 0; 
                                    font-size: 1.4rem; 
                                    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
                                    text-transform: uppercase;
                                    text-align: center;
                                    padding: 1rem;
                                ">${item.text}</h3>
                            </div>
                        </div>
                    `;
                    
                    // Add hover effects
                    card.addEventListener('mouseenter', () => {
                        const overlay = card.querySelector('.hover-overlay');
                        if (overlay) overlay.style.opacity = '1';
                    });
                    
                    card.addEventListener('mouseleave', () => {
                        const overlay = card.querySelector('.hover-overlay');
                        if (overlay) overlay.style.opacity = '0';
                    });
                    
                    // Add click functionality for fallback items
                    card.addEventListener('click', () => {
                        window.location.href = `project/${item.id}/`;
                    });
                    
                    galleryGrid.appendChild(card);
                });
                console.log('Fallback content added');
            }
        }, 2000); // Wait 2 seconds for JSON loading to complete
    </script>
</body>
</html>
